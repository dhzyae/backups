<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>订单</title>
  <link href="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="../css/swiper.css">
  <link rel="stylesheet" href="../css/base.css">
  <link rel="stylesheet" href="../css/item.css">
  <link rel="stylesheet" href="http://at.alicdn.com/t/font_3007983_dh41kw16tkq.css">
  <link rel="stylesheet" type="text/css" href="../css/public.css" />
  <link rel="stylesheet" href="../css/mygxin.css">
  <link rel="stylesheet" href="../css/proList.css">
  <link rel="stylesheet" href="../css/cs.css">

  <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script src="../js/vue.js"></script>
  <script src="../js/element.js"></script>
  <script src="../js/axios.js"></script>
</head>

<body>
  <div id="app">
    <div id="top-box">
      <div class="container">

        <div class="top-user fr">
          <a href="./register.html" class="fl register-btn">注册</a>
          <a href="javascript:;" class="username fl"></a>
          <div class="fl icon-box">
            <a href="./login.html" class="shopping-btn">
              <i class="icon"></i>
            </a>
          </div>

        </div>
      </div>
    </div>
    <div class="order cart mt">
      <!-----------------site------------------->
      <div class="site">
        <p class="wrapper clearfix">
          <el-steps :space="200" :active="active" finish-status="success">
            <el-step title="购物车"></el-step>
            <el-step title="订单确认"></el-step>
            <el-step title="完成订单"></el-step>
          </el-steps>
        </p>
      </div>
      <!-----------------orderCon------------------->
      <div class="orderCon wrapper clearfix">
        <div class="orderL fl">
          <!--------h3---------------->
          <h3>收件信息</h3>
          <!--------addres---------------->
          <div class="addres clearfix" v-for="item in list2">
            <div class="addre fl on">
              <div class="tit clearfix">
                <p class="fl">{{item.name}}
                </p>
                <p class="fr">
                  <a href="#" @click="dialogShow()" style="text-decoration: none;">默认地址，点击修改</a>
                </p>
              </div>
              <div class="addCon">
                <p>{{item.addre}}</p>
                <p>{{item.phone}}</p>
              </div>
            </div>
          </div>

        </div>
        <div class="orderR fr">
          <div class="msg">
            <h3>订单内容</h3>
            <!--------ul---------------->
            <!-- <ul class="clearfix">
              <li class="fl">
                <img :src="pro.pimg" style="width: 40px;">
              </li>
              <li class="fl">
                <p>创意现代简约干花花瓶摆件</p>
                <p>颜色分类：烟灰色玻璃瓶</p>
                <p>数量：1</p>
              </li>
              <li class="fr">￥69.90</li>
            </ul> -->
            <ul class="clearfix" v-for="item in resList">
              <li class="fl">
                <img :src="item.pimgsrc" style="width: 40px;">
              </li>
              <li class="fl">
                <p>{{item.pname}}</p>
                <p>{{item.pinfo}}</p>
                <p>数量：1</p>
              </li>
              <li class="fr">￥69.90</li>
            </ul>
          </div>
          <!--------tips---------------->
          <!-- <div class="tips">
            <p><span class="fl">商品金额：</span><span class="fr">￥{{allPrice}}</span></p>

          </div> -->
          <!--------tips count---------------->
          <div class="count tips">
            <p><span class="fl">合计：</span><span>￥0</span><span class="fr"
                style="text-decoration:line-through">￥{{allPrice}}</span></p>
          </div>
          <!--<input type="button" name="" value="去支付"> -->
          <el-button plain @click="next()" type="success" style="width: 100%;">
            去支付
          </el-button>
        </div>
      </div>
    </div>
    <div class="mask"></div>
    <div class="adddz editAddre">
      <form action="#" method="get">
        <input type="text" placeholder="姓名" class="on" />
        <input type="text" placeholder="手机号" />
        <div class="city">
          <select name="">
            <option value="省份/自治区">省份/自治区</option>
          </select>
          <select>
            <option value="城市/地区">城市/地区</option>
          </select>
          <select>
            <option value="区/县">区/县</option>
          </select>
          <select>
            <option value="配送区域">配送区域</option>
          </select>
        </div>
        <textarea name="" rows="" cols="" placeholder="详细地址"></textarea>
        <input type="text" placeholder="邮政编码" />
        <div class="bc">
          <input type="button" value="保存" />
          <input type="button" value="取消" />
        </div>
      </form>
    </div>
    <div id="footer" style="position: relative;">
      <div class="footer-top">
        <div class="container">
          <div class="about box col-lg-4">
            <h2>关于商城</h2>
            <p class="text">
              360商城是奇虎360公司的官方电商平台，主要经营360安全智能设备，以及相关领域消费品。提供最新的360智能设备，最贴心的售后服务，360社区一手评测资讯，享受360安全、安心、放心的购物体验。</p>
            <div class="icon-box">
              <span>关于我们</span>
              <span class="icon-wechat">
                <span class="hover-img text-center">
                  <img src="../images/wechat.png">
                </span>
              </span>
              <a href="javascript:;" class="icon-sina">
                <span class="hover-img text-center">
                  <img src="../images/wechat.png">
                </span>
              </a>
            </div>
          </div>
          <div class="help box col-lg-5">
            <div class="help-1 fl">
              <h2>售后服务</h2>
              <a href="javascript:;" class="text">7日无理由退货</a>
            </div>
            <div class="help-2 fl">
              <h2>帮助中心</h2>
              <a href="javascript:;" class="text">用户注册</a>
            </div>
          </div>
          <div class="contact box col-lg-3">
            <h2 class="text-center">联系我们</h2>
            <p class="phone">400-6822-360</p>
            <p class="work-time">周一至周日 9:00-18:00（仅收市话费</p>
          </div>
        </div>
      </div>
      <div class="footer-bottom">
        <div class="container">
          <div class="service-list col-lg-12">
            <a href="javascript:;">
              <span class="icon-return"></span>
              7天无理由退货
            </a>
            <a href="javascript:;">
              <span class="icon-exchange"></span>
              15天免费换货
            </a>
            <a href="javascript:;">
              <span class="icon-package"></span>
              满99元包邮
            </a>
          </div>
          <div class="copyright-line col-lg-12">
            <p>©2019-2021 mall.360.cn版权所有</p>
            <p>
              <a href="javascript:;">京ICP备08010314号-6</a>
              <a href="javascript:;">营业执照</a>
            </p>
            <p>
              公司名称：北京视觉世界科技有限公司 | 社会统一信用代码：91110105336460203N | 食品经营许可证<br>
              公司地址：北京市朝阳区酒仙桥路6号院2号楼1至17层102号内5层501 | 联系方式：400-6822-360
            </p>
          </div>
        </div>
      </div>
    </div>
    <el-dialog title="提示" :visible.sync="dialogVisible" width="30%" :before-close="handleClose">
      <div>
        <el-input v-model="inp1" placeholder="地址" type="primary"></el-input>
        <el-input v-model="inp2" placeholder="姓名" type="primary"></el-input>
        <el-input v-model="inp3" placeholder="电话" type="primary"></el-input>
      </div>
      <span slot="footer" class="dialog-footer">
        <el-button @click="dialogVisible = false">取 消</el-button>
        <el-button type="primary" @click="add">确 定</el-button>
      </span>
    </el-dialog>
  </div>

  <script>
    let cv = new Vue({
      el: "#app",
      data () {
        return {
          user: false,
          userName: "",
          active: 2,
          dialogVisible: false,
          inp1: "",
          inp2: "",
          inp3: "",
          list: [{
            id: 0,
            addre: "湖南长沙民政",
            name: "张三",
            phone: "13111111111"
          }],
          allPrice: "",
          list2: [],
          resList: []
        }
      },
      created () {
        this.list2 = this.list
      },
      mounted () {
        // var data = window.location.search.replace("?", "");
        var data = localStorage.getItem("userGoodsCar")
        data = JSON.parse(data);
        if (!localStorage.getItem("address")) {
          var people = [{
            id: 0,
            name: "张三",
            phone: "234112344",
            addre: "长沙民政"
          }]
          people = JSON.stringify(people)
          localStorage.setItem("address", people)
        }

        console.log(data[0].goodsCar);
        var shoplist = []
        data[0].goodsCar.forEach(element => {
          shoplist.push(element.pid)
        });
        console.log(shoplist);
        axios.get("json/shop.json").then(a => {
          shoplist.forEach(d => {
            a.data.forEach(element => {
              // console.log(element);
              if (element.pid == d) {
                // console.log(element);
                this.resList.push(element)
              }
            })


          });
        })
        setTimeout(_ => {
          var dd = this.resList
          var num = 0
          dd.forEach(s => {
            console.log(s.price);
            num = s.price + num
          })
          this.allPrice = num
        }, 100)


      },
      methods: {
        next () {
          if (this.active++ > 2) this.active = 0;
          this.$notify({
            title: '支付成功',
            message: '恭喜完成零元购',
            type: 'success'
          });
        },
        handleClose (done) {
          this.$confirm('确认关闭？')
            .then(_ => {
              done();
            })
            .catch(_ => { });
        },
        add () {
          this.dialogVisible = false;
          var lis = localStorage.getItem("address")
          var lisq = JSON.parse(lis)
          lisq[0].addre = this.inp1
          lisq[0].name = this.inp2
          lisq[0].phone = this.inp3
          //重新保存
          this.list2 = lisq
          var qa = JSON.stringify(lisq)
          localStorage.setItem("address", qa)
        },
        dialogShow () {
          this.dialogVisible = true
          var redd3 = localStorage.getItem("address")
          console.log(redd3);
          var redd4 = JSON.parse(redd3)
          this.inp1 = redd4[0].addre
        },

      },

    })
  </script>
</body>

</html>